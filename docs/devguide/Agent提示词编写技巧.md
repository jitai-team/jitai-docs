---
sidebar_position: 4
---

## 核心原则
- **明确角色与唯一目标**：让模型专注，减少歧义。
- **写清可用工具与参数**：工具即能力边界，参数即输入输出契约。
- **规定决策流程**：把“怎么想”固化为步骤，从而稳定产出。
- **前置条件约束**：先收紧再开放，防越权、防误伤。
- **强约束输出规范**：结构化产出，便于系统读取与联动。
- **必要澄清与容错**：先问清楚再动手，保持安全与一致性。
- **列出反模式**：告诉模型“绝对不要做什么”。

## 关键做法
- **角色与目标唯一化**  
  用“你是X；唯一目标是Y”开场，避免多任务混入。
- **工具清单标准化**  
  明确工具名、调用方式、关键参数（如`{pageFullName}.Table1.call(qFilter)`）。
- **决策步骤可执行**  
  快速校验→识别意图→标准化条件→构造并执行→结果生成→异常保护”，每步可检查、可追踪。
- **输出规范严格**  
  定义各操作的输出内容，约束“最少话术”。
- **澄清与容错规则**  
  针对“模糊词/越权/高风险操作”先澄清后执行。
- **反模式列举**  
  禁止“无条件更新/删除”“擅自造字段”“输出隐私字段”等。
- （进阶）**可计算型问题要嵌入验证闭环**  
  先“收集数据边界→分析数据→计算基线→强制验证→输出报告”，把“正确性”做成闭环。

## 通用提示词模板示例
```md
# 角色：{角色名}（{关键特征，如：安全·精确·最少话术}）
你是“{角色名}”。你的目标是：{用一句话定义核心任务}。

# 可用工具
- 业务工具：
  - {toolA}(参数：...)
  - {toolB}(参数：...)
- 页面/组件工具：
  - {pageFullName}.{widget}.call(参数：...)
  - {pageFullName}.getVariableValue(...)

# 决策流程（必须严格执行）
1) 快速校验：关键条件是否齐备；不满足则停止并输出原因+下一步建议。
2) 识别意图：intent ∈ {意图1｜意图2｜...}，列出同义词映射。
3) 条件标准化：字段名/类型对齐模型；筛选字段仅限白名单；必要时附加dataRange。
4) 执行操作：按意图选择正确工具与参数，避免全表操作；批量差异更新要拆分。
5) 结果生成：按“输出规范”产出，空结果用[]表示。
6) 异常与保护：缺少筛选/高风险时先澄清；禁止无条件更新/删除。

# 输出规范（必须遵守）
- 数据输出：
  - 操作1：输出{...}
  - 操作2：输出{...}
- 文本风格：仅输出必要数据与简明结论；报错时说明原因与建议。

# 澄清与容错
- 出现“全部/最近/大概/差不多”等模糊表达时，先提出1条精准澄清。
- 被权限限制阻断时，明确限制点与可替代方案。

# 反模式（禁止）
- 无筛选的批量更新/删除；擅自创造字段名/类型；越权读取/写入；输出无关说明/隐私字段。
```

## 快速核对清单（写完提示词一定要过一遍）
- 角色与唯一目标是否精确、可测？
- 工具名/参数/约束是否完整、无二义？
- 决策流程是否能“从输入走到输出”且每步可验证？
- 输出结构是否固定，枚举是否闭合，风格是否“最少话术”？
- 澄清规则是否覆盖常见模糊表达？
- 反模式是否覆盖“越权/造字段/全表操作/隐私泄露”？
- 失败与高风险分支是否“先澄清、再执行”？
- 对“生成/计算类任务”，是否有数值边界与强制验证？
- 示例是否与规范一致，能直接照猫画虎？

## 实用写法与小技巧
- **用“白名单”而非“黑名单”**约束字段与行为。
- **把“同义词→枚举意图”**写清，减少误判。
- **把“如何算对”写成公式/范围/示例**，别用主观语言。
- **失败路径要具体**：写出“停止+原因+建议”的固定话术。
- **文本风格极简**：结构先行，解释从简；能数据就不叙述。
- **先问再做**：任何越权/高风险/不完整输入，先澄清。

## 简短示例：改写一个“模糊请求”提示词
不佳版：  
“你是数据助手，帮我改数据，有问题就自己看着办。”

改进版（要点提炼后的一句话骨架）：  
“你是‘数据管理专家’，唯一目标是对指定模型做新增/删/改/查；列出工具与参数；用‘校验→意图→标准化→执行→结果→保护’流程；强约束权限与字段范围；固定输出结构；遇到模糊与高风险先澄清。”

——把上面骨架扩成前文模板即可直接落地。

- - -
