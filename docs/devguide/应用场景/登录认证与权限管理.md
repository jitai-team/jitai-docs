# 登录认证与权限管理

某制造企业要为MES生产管理系统设计权限体系。系统涉及多个角色：车间主任需要管理整个车间的生产数据，班组长要协调本班组的生产任务，操作工专注设备操作和数据录入。同时，供应商需要查看相关订单状态，外包人员需要临时系统访问权限。

企业希望内部员工通过企业微信直接登录并自动获得相应权限，外包人员使用临时账号，供应商通过微信公众号进行只读访问。最终，开发完成的系统要能平稳移交给工厂IT管理员进行日常权限维护。

## 权限体系设计与实施
- **角色层次设计**：系统管理员（全权限）→ 车间主任（车间数据权限）→ 班组长（班组数据权限）→ 操作工（设备操作权限）
- **多登录方式集成**：内部员工企业微信扫码（自动同步组织架构）、外包人员账号密码（临时权限）、供应商微信公众号（只读查看）

**开发步骤**：
1. 创建[标准角色](/docs/reference/开发框架/JitAuth/标准角色.md)（车间主任、班组长、操作工等）
2. 配置[企业微信自建扫码登录](/docs/reference/开发框架/JitAuth/登录认证/企业微信自建扫码登录.md)和[微信公众号登录](/docs/reference/开发框架/JitAuth/登录认证/微信公众号登录.md)
3. 集成[企业微信自建组织](/docs/reference/开发框架/JitAuth/企业组织/企业微信自建组织.md)实现组织架构同步

## 门户规划与权限分配
- **默认门户使用**：开发区门户（系统开发）、管理区门户（生产管理）、默认门户（一线操作）
- **专用门户创建**：为供应商和客户创建专用门户，限制访问生产数据和质量报告
- **门户权限设计**：管理区门户（主任级完全访问、班组长部分功能）、默认门户（操作工设备操作、数据录入）

**开发步骤**：
1. 创建专用的[标准门户](/docs/reference/开发框架/JitWeb/门户/标准门户.md)（供应商门户、客户门户）
2. 配置门户菜单和[页面](/docs/category/页面)
3. 在角色管理中为角色授予相应门户权限

## 组件内细粒度权限控制
- **按钮级权限**：生产报表页面删除按钮（只有车间主任可见）、编辑按钮（根据字段权限动态显示）、导出按钮（班组长及以上）
- **字段级权限**：生产数量列（所有角色可见）、设备状态列（操作工只读，班组长可编辑）、成本数据列（只有车间主任及以上可见）、质检结果列（质检员可编辑，其他角色只读）
- **数据范围权限**：操作工只看自己班组数据、班组长看管理班组数据、车间主任看整个车间数据

**开发步骤**：在角色管理中为不同角色配置门户页面下组件的按钮、字段、数据范围权限

## 权限交接与运维管理
- **开发阶段**：系统开发者在开发区配置角色权限、门户权限、登录方式
- **测试验证**：通过不同生产角色登录验证权限设计的正确性和完整性
- **系统交付**：将权限管理功能移交给工厂IT管理员，提供权限管理培训
- **日常运维**：工厂管理员进行员工角色分配、权限调整、组织架构变更时的权限更新

