---
sidebar_position: 3
---

# 数据表模型

数据表模型是JitAi应用的数据基础，一个数据表模型就对应着数据库里面的一张表，用于定义业务数据的结构、类型和约束规则。

## 创建数据表模型

### 数据表创建入口

![模型创建配置](./img/模型创建配置.png)

在开发区的元素树中找到`数据模型`，点击右侧的 `+`，选择`数据表`，完成数据表创建流程即可创建数据模型。

### 创建方式
JitAi支持两种数据模型创建方式，分别为`新建数据表数据模型`和`基于已有表创建模型`。

#### 新建数据表数据模型
适用于全新业务需求，需要从零开始设计数据结构的场景。新建模型后会自动在数据库生成对应的表。

![新建数据模型](./img/新建数据模型.png)

开发者在`新建模型`弹窗中填写模型名称，创建方式选择`新建数据表数据模型`，数据库和数据表名会自动生成，也可以选择已有数据库元素，编辑数据库表名。

#### 基于已有数据表创建模型
适用于数据库中已有数据表，需要在JitAi应用中快速创建对应模型的场景。

![基于数据库表创建模型](./img/基于已有数据模型.png)

开发者在`新建模型`弹窗中填写模型名称，创建方式选择`基于已有表创建模型`，选择已有数据库，数据库默认为内置数据库。

![选择数据表](./img/选择数据表.png)

点击`选择数据库表`的输入框即可弹出该数据库所有表。

![字段映射](./img/字段映射.png)

选择一个数据库表后，点击`确定`，进入到字段配置页面，点击`从关联的数据库表中生成数据模型字段`，然后将数据库字段映射成对应数据类型。
 

## 设计表字段与数据类型
JitAi应用中有`单行文本`、`多行文本`、`富文本`、`数字`、`金额`等多种数据类型可以用作数据库表字段。

![字段配置](./img/字段配置.png)

在创建数据表时，应根据具体业务需求选择合适的字段类型。

每种数据类型都有各自的配置选项，以**单行文本**为例：

![单行文本配置](./img/单行文本配置.png)
单行文本数据类型应用广泛，是数据建模中最基础、最常用的字段类型之一。主要特点包括：仅支持单行文本内容且不允许换行，系统会自动生成字段名称（如 `f5f6`）方便数据库操作，默认最大可存储255个字符。该类型字段支持多种个性化设置和约束条件，可以设置提示文字，限制最大文本长度，还可通过唯一性控制确保字段值不重复，并支持创建数据库索引以优化查询性能。此外，单行文本字段还支持设置计算公式实现动态计算，以及预设默认值等高级功能，满足不同业务场景下的灵活需求。

单行文本字段适用于存储如下类型的数据：姓名、用户名、标题、简短描述及其他不需要换行的简短文本信息。

## 配置表索引优化查询
在高级配置中，可以为数据表添加`多列联合唯一`和`组合索引`来优化查询性能和保证数据完整性。

![联合索引](./img/联合索引.png)
### 多列联合唯一
通过选择多个字段创建联合唯一约束，确保这些字段的组合值在整个表中唯一。例如，可以将`产品名称`和`规格`字段设置为联合唯一，防止相同规格的产品出现重复。

### 组合索引  
选择多个字段创建组合索引，根据这些字段同时筛选可显著提升查询性能。

:::warning 警告
合理配置索引能有效提升查询速度，但过多的索引会影响数据写入性能，需要根据实际业务场景平衡。
:::

## 使用内置数据管理功能
JitAi为数据表模型提供了数据管理功能，无需编写代码即可对数据表进行CRUD操作，在开发区也能对数据进行管理。

![数据管理1](./img/数据管理1.png)

点击`数据管理`，就可以进入到数据管理可视化页面。

![数据管理2](./img/数据管理2.png)

数据管理功能包括数据筛选查询、新增、编辑、删除、批量修改、批量删除、清空重置数据和导入导出等，用户可以直观地管理数据表中的所有记录。

## 扩展模型功能

### 模型函数配置

在面向对象开发中，可以为类封装函数来实现特定业务逻辑，JitAi的数据模型也支持自定义函数，为数据模型扩展业务逻辑处理能力。

![模型函数1](./img/模型函数1.png)

开发者在模型编辑器页面，点击`函数设计`页签，即可进入函数设计页面，点击`新建函数`，在弹框内输入函数名称（英文名称自动生成，开发者可以自定义修改）。

![模型函数2](./img/模型函数2.png)

点击`确定`即可完成函数创建并开始编辑函数逻辑。

![模型函数3](./img/模型函数3.png)

模型函数支持新建、编辑、删除，参数和返回值类型可自定义，内置可视化代码编辑器便于快速插入常用语句。

### 源码模式

除了可视化配置外，还支持在代码模式下直接修改模型源码，为高级开发者提供更大的灵活性。

![查看源码](./img/查看源码.png)

切换到源码模式下，可以看到模型定义，模型函数等整个模型的源代码。
