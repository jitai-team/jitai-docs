---
sidebar_position: 3
---

# 矩阵型元架构协作机制

通过元素族类、元素分层、应用继承机制的有机结合，构建了一套具有强大复用性和扩展性的架构模式。本章从协作视角解析矩阵型元架构的设计理念和Meta/Type/Instance三层协作机制。

## 设计哲学

### 通用统一
- **统一抽象语言**：跨领域的一致性表达方式
- **通用组合模式**：标准化的组件组合规则
- **统一接口规范**：一致的组件交互协议

### 高度复用
- **横向复用**：同类元素在不同应用中的复用
- **纵向复用**：不同层次元素的继承复用
- **组合复用**：通过组合实现功能的复用

### 自由扩展
- **新元素类型扩展**：动态添加新的元素类型
- **现有元素增强**：对现有元素的功能扩展
- **跨域扩展**：向新业务领域的扩展

## 矩阵化元素族类结构

JitAi通过Meta、Type、Instance分层，形成横向元素族类与纵向元素分层的矩阵组织方式：

![矩阵型元架构 - 元素族类与分层协作](./img/matrix-architecture.svg)

### 分层协作机制
- **Meta层（族类根节点）**：定义族类标准，提供Type元素的加载机制和规范约束
- **Type层（类型封装）**：封装技术实现，提供配置器、加载器和实例化能力
- **Instance层（业务实例）**：承载具体业务逻辑，通过Type层获得技术能力，通过Meta层获得族类约束

### 矩阵扩展维度

- **Meta层扩展**：新增族类定义，扩展业务领域覆盖范围
- **Type层扩展**：在现有族类下新增类型，丰富技术实现选择
- **Instance层扩展**：基于现有类型创建新实例，满足个性化需求

## 继承机制

### 元素族内的继承
JitAi通过Meta/Type/Instance三层架构实现了递进式的继承机制：
```
Meta层规范 → Type层实现 → Instance层配置
    ↓           ↓            ↓
  族类约束   技术能力封装   业务逻辑承载
```
- **Meta层继承**：族类规范的标准化传承，确保同族元素的一致性约束
- **Type层继承**：技术实现的模块化复用，通过配置器和加载器实现能力传递
- **Instance层继承**：业务逻辑的参数化定制，通过配置覆盖实现个性化

### 应用级继承
应用级继承在矩阵型元架构基础上构建了层次化的复用体系，通过继承链实现跨应用的元素族类共享和配置传递。
#### 应用继承机制原理
应用继承通过 `app.json` 中的 `extends` 配置实现，支持多级继承链：

#### 继承声明方式
应用在 `app.json` 中声明自己继承的父应用：

```json
{
  "appId": "wanyun.MyApp",
  "extends": [
    {
      "appId": "wanyun.BaseApp",
      "version": "1.0.0"
    }
  ]
}
```

#### 继承复用机制
1. **元素族类复用**：子应用可以使用父应用中定义的元素族类，创建type指向父应用中某个Type元素的实例元素
2. **元素重写**：子应用可以重写父应用中的已有元素，实现功能定制





